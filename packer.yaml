---
builders:
  - type: 'arm-image'
    iso_checksum_type: 'sha256'
    iso_target_extension: 'img'
    output_filename: 'build/raspberry_pi.img'
    image_type: 'raspberrypi'
    target_image_size: '{{user `target_image_size`}}'
    qemu_binary: 'qemu/arm-linux-user/qemu-arm-static'

    # TODO: Point `iso_url` and `iso_checksum_url` to HTTPS URLs instead of local files.
    iso_url: 'file::build/raspian.zip'
    iso_checksum_url: 'file::build/raspian.zip.sha256'
provisioners:
  # Upgrade system packages.
  - type: 'shell'
    inline:
      - 'apt-get --quiet update'
      - 'apt-get --quiet --yes upgrade'
    inline_shebang: &shebang '/bin/sh -eux'
variables:
  hostname: 'raspberrypi'
  timezone: 'Australia/Sydney'
  wifi_name: null
  wifi_password: null

  # TODO: Check this.
  target_image_size: '34359738368'
sensitive-variables:
  - 'wifi_password'
